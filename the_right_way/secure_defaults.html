<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Secure Defaults - Web API Guide</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../intro.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Abstract Design</li><li class="chapter-item expanded "><a href="../the_right_way/index.html"><strong aria-hidden="true">1.</strong> The Right Way</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../the_right_way/secure_defaults.html" class="active"><strong aria-hidden="true">1.1.</strong> Secure Defaults</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.2.</strong> Threat Model</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.3.</strong> Authentication</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.4.</strong> Authorization</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.5.</strong> Data Storage</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.6.</strong> Documentation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.7.</strong> Testing</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.8.</strong> Infrastructure</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.9.</strong> Deployment</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.10.</strong> Error Handling</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.11.</strong> Logging</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.12.</strong> Input Validation</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.13.</strong> Correctness</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">1.14.</strong> Maintenance</div></li></ol></li><li class="chapter-item expanded "><li class="part-title">Specific Implementations</li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> FastAPI - The Best Way Today</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.</strong> Rocket - Flying Toward the Future</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Web API Guide</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="secure-defaults"><a class="header" href="#secure-defaults">Secure Defaults</a></h1>
<p>News story after news story has made it abundantly clear that offering security features is not enough, they <em>must</em> be enabled by default. Unfortunately security has taken a back seat to most other aspects of web development pretty consistently throughout the history of the internet. Typically, developers will only go out of their way to improve the security of their application when forced to by some external entity. This is why it is crucial that the developers of any internet-connected software ensure the <em>default</em> option for their users is <strong>the most secure one</strong>. When making the default secure is not plausible, efforts must be taken to lower the barrier to security for developers and encourage them to take necessary steps themselves.</p>
<p>It's impossible to cover all potential security features that need to have good defaults, but let's take a quick look at the <a href="https://en.wikipedia.org/wiki/STRIDE_%28security%29">STRIDE</a> mnemonic to get an idea of some examples. Each letter in &quot;STRIDE&quot; stands for a security threat to an application.</p>
<h2 id="s---spoofing"><a class="header" href="#s---spoofing">S - Spoofing</a></h2>
<p>Spoofing is the threat of impersonation. In most applications, it matters who or what is trying to perform a given action. As a result, any given API solution should default to having an <strong>enforced</strong> authentication mechanism in place that developers must specifically opt out of if they do not care about this threat. More about authentication can be found in <a href="./authentication.html">the authentication section</a>.</p>
<h2 id="t---tampering"><a class="header" href="#t---tampering">T - Tampering</a></h2>
<p>Tampering is the threat of an unauthorized entity somehow modifying otherwise legitimate data. One example of this might be a &quot;monster in the middle&quot; attack where an attacker places themself in between a legitimate client of an API and the API service itself. The attacker can then modify the requests of the client before passing them along to the service to change the outcome. This problem, at the time of writing at least, doesn't have many great solutions. However, even an imperfect solution (such as <a href="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security">a header that protects users only <em>after</em> their first interaction</a>) should be enabled by default.</p>
<p>If such a solution becomes prohibitively difficult for development, the documentation for the solution should provide consumers with a way of <em>temporarily</em> disabling this protection which will only impact the development environment.</p>
<h2 id="r---repudiation"><a class="header" href="#r---repudiation">R - Repudiation</a></h2>
<p>Repudiation is the threat of lack of information. If a data breach or attack happens, it should be detectable and, as much as possible, traceable. To help prevent repudiation, any API solution must include sensible defaults for logging interactions with clear documentation for configuring verbosity (see <a href="./logging.html">the logging section</a> for more detail).</p>
<h2 id="i---information-disclosure"><a class="header" href="#i---information-disclosure">I - Information Disclosure</a></h2>
<p>Information disclosure is one of the broader threats to web applications, as it covers any situation in which information is leaked which could be harmful. This could be logging sensitive information to an insecure location (see <a href="./logging.html">the logging section</a> for more detail). It could also be providing too much information in an error response (see <a href="./error_handling.html">error handling</a>). <a href="./authorization.html">Authorization</a> may be inadequate allowing users access to data they shouldn't be able to see.</p>
<p>A solution must make every effort to implement patterns and technologies that reduce the chance of information disclosure while also pointing out the potential risks to users. I suggest that creators of solutions go a step further and provide <a href="./threat_model.html">a threat model</a> both to show the attack surface and threats to the solution in general and so that performing such a model on an application is <strong>easier for the developer</strong>. Furthermore, it's extremely important that a clear method of communication with consumers is established and that they are encouraged to follow it for security updates (see <a href="./maintenance.html">maintenance</a>).</p>
<h2 id="d---denial-of-service"><a class="header" href="#d---denial-of-service">D - Denial of Service</a></h2>
<p>Denial of service is the security perspective of stability. Common features that solutions require to mitigate this threat are scaling gracefully under load (see <a href="./infrastructure.html">infrastructure</a>) and preventing bugs from crippling the system (see <a href="./error_handling.html">error handling</a> and <a href="./correctness.html">correctness</a>).</p>
<h2 id="e---elevation-of-privilege"><a class="header" href="#e---elevation-of-privilege">E - Elevation of Privilege</a></h2>
<p>Elevation of privilege is specifically attempting to bypass any <a href="./authorization.html">authorization</a> system which is in place. Solutions must provide an authorization system which is explicit to reduce the chance of under-securing and on by default to reduce the chance of failing to secure altogether. Additionally, solutions should use tools that prevent bypassing the authorization system altogether (see <a href="./correctness.html">correctness</a> and <a href="./maintenance.html">maintenance</a>).</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>The abstract examples above just barely scratch the surface of what is necessary to properly secure a web application. Security is a complex and difficult topic that teams of professionals can spend years working on and <em>still</em> miss things. This is why it's so critically important for security concepts to be enforced as far down the stack as possible and hardened by default. Only when something <em>cannot</em> be handled automatically should the developer be required to implement it themself, and the implementation should be as easy as possible, introduced early, and reinforced often. Finally, because the security landscape changes quickly and because it's so common to make mistakes, there <strong>must be clear, transparent, and accessible</strong> communication to consumers of any solution.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../the_right_way/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../the_right_way/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
